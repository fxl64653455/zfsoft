<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zfsoft.boot.logbiz.dao.daointerface.IBizLogDao" >

	<resultMap id="BizLogMap" type="com.zfsoft.boot.logbiz.dao.entities.BizLogModel">
		<result property="logId" column="LOG_ID" />
		<result property="logLogger" column="LOG_LOGGER" />
		<result property="logThread" column="LOG_THREAD" />
		<result property="logFunc" column="LOG_FUNCTION" />
		<result property="logLine" column="LOG_LINE" />
		<result property="logLivel" column="LOG_LEVEL" />
		<result property="logMessage" column="LOG_MESSAGE" />
		<result property="logTimestamp" column="LOG_TIMESTAMP" />
	</resultMap>

	<select id="getPagedSearchList" resultMap="BizLogMap" parameterType="com.zfsoft.boot.logbiz.web.dto.BizLogDto">
		select LOG_ID,LOG_LOGGER,LOG_THREAD,LOG_FUNCTION,LOG_LINE,LOG_LEVEL,LOG_MESSAGE,LOG_TIMESTAMP from ZFTAL_LOG_BIZ 
		<where>
			<if test="czms != null and czms != ''">
				and LOG_MESSAGE like '%'|| #{czms} ||'%'
			</if>
			<if test="czr != null and czr != ''">
				and LOG_MESSAGE like '%"czr":"'|| #{czr} ||'"%'
			</if>
			<if test="mkmc != null and mkmc != ''">
				and LOG_MESSAGE like '%"czmk":"'|| #{mkmc} ||'"%'
			</if>
			<if test="ywmc != null and ywmc != ''">
				and LOG_MESSAGE like '%"ywmc":"'|| #{ywmc} ||'"%'
			</if>
			<if test="beginTime != null and beginTime != '' and endTime != null and endTime != ''">
				and LOG_TIMESTAMP > #{beginTime} and LOG_TIMESTAMP <![CDATA[<]]> #{endTime}
			</if>
		</where>
	</select>
	
</mapper>